<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëŒ€ì‚¬ì—°ìŠµ</title>

<style>
body {
    font-family: sans-serif;
    padding: 20px;
    background-color: #f5f5f5;
}

h1 {
    text-align: center;
}

textarea {
    width: 100%;
    height: 120px;
    font-size: 16px;
    margin-bottom: 15px;
    padding: 10px;
}

button {
    width: 100%;
    padding: 15px;
    font-size: 18px;
    margin-top: 10px;
    border: none;
    border-radius: 10px;
    background-color: #007AFF;
    color: white;
}

.controls {
    margin-bottom: 20px;
    background: white;
    padding: 15px;
    border-radius: 10px;
}

label {
    font-weight: bold;
}
</style>
</head>

<body>

<h1>ğŸ­ ëŒ€ì‚¬ì—°ìŠµ</h1>

<div class="controls">

<label>ëª©ì†Œë¦¬ ì„ íƒ</label><br>
<select id="voiceSelect">
    <option value="male">ë‚¨ì</option>
    <option value="female">ì—¬ì</option>
</select>

<br><br>

<label>ëŒ€ì‚¬ ì†ë„: <span id="speedValue">1</span></label><br>
<input type="range" id="speedControl" min="0.5" max="2" step="0.1" value="1">

</div>

<label>ìƒëŒ€ë°© ëŒ€ì‚¬</label>
<textarea id="dialogue" placeholder="ìƒëŒ€ ë°°ìš° ëŒ€ì‚¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>

<button onclick="speak()">â–¶ ëŒ€ì‚¬ ì¬ìƒ</button>
<button onclick="stopSpeak()">â¹ ì •ì§€</button>

<script>

let voices = [];

function loadVoices() {
    voices = speechSynthesis.getVoices();
}

speechSynthesis.onvoiceschanged = loadVoices;

const speedControl = document.getElementById("speedControl");
const speedValue = document.getElementById("speedValue");

speedControl.addEventListener("input", () => {
    speedValue.textContent = speedControl.value;
});

function speak() {

    const text = document.getElementById("dialogue").value;
    const voiceType = document.getElementById("voiceSelect").value;
    const speed = parseFloat(speedControl.value);

    if (!text) {
        alert("ëŒ€ì‚¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
        return;
    }

    speechSynthesis.cancel();

    const utterance = new SpeechSynthesisUtterance(text);

    utterance.rate = speed;
    utterance.lang = "ko-KR";

    if (voices.length > 0) {

        if (voiceType === "female") {
            utterance.voice = voices.find(v => 
                v.name.includes("Female") ||
                v.name.includes("ì—¬")
            ) || voices[0];
        } else {
            utterance.voice = voices.find(v => 
                v.name.includes("Male") ||
                v.name.includes("ë‚¨")
            ) || voices[0];
        }

    }

    speechSynthesis.speak(utterance);
}

function stopSpeak() {
    speechSynthesis.cancel();
}

</script>

</body>
</html>
